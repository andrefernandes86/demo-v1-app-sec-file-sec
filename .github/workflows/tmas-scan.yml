- name: Run Trend Micro TMAS Scan
  uses: trendmicro/tmas-scan-action@main
  continue-on-error: true
  with:
    artifact: .
    path: .
    vulnerabilitiesScan: true
    malwareScan: true
    secretsScan: true

    # ðŸ‘‡ Force report creation
    additionalArgs: --output=markdown=scan-report.md

    tmasApiKey: ${{ secrets.TMAS_API_KEY }}
    githubToken: ${{ secrets.GITHUB_TOKEN }}

- name: Upload TMAS scan report
  if: always()
  uses: actions/upload-artifact@v4
  with:
    name: tmas-scan-report
    path: scan-report.md
